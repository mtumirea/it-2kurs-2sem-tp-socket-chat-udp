_Спасибо нашему подписчику!_

===

# Лаба #6 по Технологиям Программирования

~~_Изначально я хотел выложить этот код на github, но потом мне стало стыдно и я передумал.
Поэтому большая часть комментарием написана на английском языке, так что уж простите._~~

## Что это вообще такое?

Данная лаба построена на:

* node.js
* electron framework, а точнее [electron-quick-start](http://electron.atom.io/docs/latest/tutorial/quick-start)
* также за основу был взят пример [socket чата на socket.io](https://github.com/socketio/socket.io/tree/master/examples/chat)
* для сборки в .exe используется [electron-builder](https://github.com/electron-userland/electron-builder)

# Изменения в лабе

По хорошему, чтобы что-то тут изменить и пересобрать Вы должны понимать, что такое npm

Но для простоты я опишу все команды и файлы:

## Что хорошо бы было изменить:

* поищите @TODO или в IDE откройте и пофиксите
* допилите отправку файлов
* вынесите codes в отдельное место, чтобы они не были захардкожены в udp-client.js и app.js, в идеале сделать файл настроек

## Запуск того, что есть сейчас

`npm install && npm start`

Данный код подпишет вас на 224.186.54.75 на 1025 порту
Структура сообщений:
* первые 4 байта это метка
* следующие 4 байта это длина строки сообщения
* метки:
    * 2016 - сообщение
    * 2017 - отправка имени и запрос на имя
    * 2018 - адрес обратного запроса
    * 2019 - удаление имени(выход пользователя)
    
## Какие файлы можно менять:

* Папка build:

Там просто лежит иконка для компиляции .exe

* main.js:
    * если вы хотите убрать DevTools панель, то закомментируйте строку 22(`mainWindow.webContents.openDevTools()`)
    * в принципе если вы шарите, то поймете что делают остальные параметры и как их задавать. В конце концов курите документацию для electron'a
    
* Папка chat:
    * Папка libs - в ней лежит jquery, хотите, можете обновить, но тогда меняйте его подгрузку в app.js
    * app.js - код отвечает за основную логику и интерфейс
    * udp-client.js - код отвечает за udp сокеты
    * index.html - сама страничка(то бишь интерфейс)
    * style.css - стили для index.html

## Компиляция в исполняемый файл

Я использовал [electron-builder](https://github.com/electron-userland/electron-builder)
все инструкции есть там
в кратце `npm run pack` и в папке `dist` будет .exe

## Логика работы

Ну ребят, лениво описывать. Догадайтесь сами и почитайте код, он вполне понятный.

## Работа с интерфейсом

* При включении вы видите инпут для ввода multicast-ip и порта в формате ip:port
* Если порт не указан, то берется 80
* После этого выводится форма для ввода никнейма
* кнопка R в кружке справа вверху обозначает переподключение